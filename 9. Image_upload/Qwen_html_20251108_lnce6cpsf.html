<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Drag-and-Drop Uploader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            :root {
                --color-primary: #6D28D9;
                --color-secondary: #F3F4F6;
                --color-text: #1F2937;
                --color-border-dash: #D1D5DB;
                --color-success: #10B981;
                --color-error: #EF4444;
            }
            .dark {
                --color-primary: #A78BFA;
                --color-secondary: #1F2937;
                --color-text: #F3F4F6;
                --color-border-dash: #4B5563;
                --color-success: #10B981;
                --color-error: #EF4444;
            }
        }
        
        #drop-area {
            border-color: var(--color-border-dash);
            background-color: var(--color-secondary);
        }
        
        .dark #drop-area {
            background-color: var(--color-secondary);
        }
        
        .browse-btn {
            background-color: var(--color-primary);
            color: white;
        }
        
        .upload-btn {
            background-color: var(--color-primary);
            color: white;
        }
        
        .file-preview {
            background-color: var(--color-secondary);
        }
        
        .dark .file-preview {
            background-color: var(--color-secondary);
        }
        
        .remove-btn {
            color: var(--color-error);
        }
        
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen transition-colors duration-300">
    <div class="max-w-3xl mx-auto p-6">
        <div class="flex justify-end mb-4">
            <button id="theme-toggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 focus:outline-none">
                <svg id="theme-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
            </button>
        </div>

        <div id="drop-area" class="border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors duration-300">
            <div class="flex flex-col items-center justify-center space-y-4">
                <svg class="w-16 h-16 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                </svg>
                <div class="space-y-2">
                    <p class="font-bold text-lg">Drag and drop your images and files here</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">Supported: JPG, PNG, PDF, Max 10MB</p>
                </div>
                <div class="relative">
                    <p class="text-gray-500 dark:text-gray-400 my-4">OR</p>
                </div>
                <button class="browse-btn px-6 py-2 rounded-lg font-medium">Browse files</button>
            </div>
            <input type="file" multiple accept="image/*,application/pdf" class="hidden" />
        </div>

        <ul id="file-list" class="mt-6 hidden"></ul>

        <div class="mt-6 flex justify-between items-center">
            <button id="upload-btn" class="upload-btn px-6 py-3 rounded-full font-medium disabled:opacity-50" disabled>Start Upload (0 files)</button>
            <div id="status-message" class="hidden"></div>
        </div>
    </div>

    <script>
        // State management
        let uploadedFiles = [];
        const maxFileSize = 10 * 1024 * 1024; // 10MB in bytes

        // DOM Elements
        const dropArea = document.getElementById('drop-area');
        const fileInput = dropArea.querySelector('input[type="file"]');
        const fileList = document.getElementById('file-list');
        const uploadBtn = document.getElementById('upload-btn');
        const statusMessage = document.getElementById('status-message');
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');

        // Theme toggle functionality
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
            
            // Update icon based on current theme
            if (document.documentElement.classList.contains('dark')) {
                themeIcon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                `;
            } else {
                themeIcon.innerHTML = `
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                `;
            }
        });

        // Initialize theme based on localStorage or system preference
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
            document.documentElement.classList.add('dark');
            themeIcon.innerHTML = `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            `;
        }

        // Drag and drop event handlers
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            dropArea.classList.add('border-primary');
            dropArea.classList.add('bg-opacity-20');
        }

        function unhighlight() {
            dropArea.classList.remove('border-primary');
            dropArea.classList.remove('bg-opacity-20');
        }

        // Handle dropped files
        dropArea.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFiles(files);
        }

        // Clicking the drop area triggers file input
        dropArea.addEventListener('click', () => {
            fileInput.click();
        });

        // Handle file input change
        fileInput.addEventListener('change', () => {
            handleFiles(fileInput.files);
        });

        // Process files
        function handleFiles(files) {
            [...files].forEach(file => {
                if (file.size > maxFileSize) {
                    showStatus(`File ${file.name} exceeds 10MB limit`, 'error');
                    return;
                }
                
                addFileToList(file);
            });
        }

        // Add file to list
        function addFileToList(file) {
            // Add to state
            uploadedFiles.push(file);
            
            // Show file list if hidden
            fileList.classList.remove('hidden');
            
            // Update upload button count
            uploadBtn.textContent = `Start Upload (${uploadedFiles.length} files)`;
            uploadBtn.disabled = false;
            
            // Create list item
            const li = document.createElement('li');
            li.className = 'flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 fade-in';
            li.dataset.fileId = uploadedFiles.length - 1; // Store index for removal
            
            // Format file size
            const fileSize = (file.size / (1024 * 1024)).toFixed(2) + ' MB';
            
            // Determine file type and extension
            const fileExt = file.name.split('.').pop().toUpperCase();
            const fileType = file.type.startsWith('image/') ? 'Image' : 'Document';
            
            // Create preview
            const previewDiv = document.createElement('div');
            previewDiv.className = 'file-preview w-24 h-20 flex items-center justify-center rounded overflow-hidden';
            
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = e => {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'object-cover w-full h-full';
                    previewDiv.appendChild(img);
                };
                reader.readAsDataURL(file);
            } else {
                // Default file icon for non-images
                previewDiv.innerHTML = `
                    <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                `;
            }
            
            // Create info section
            const infoDiv = document.createElement('div');
            infoDiv.className = 'flex-1 mx-4 text-left';
            infoDiv.innerHTML = `
                <p class="font-medium truncate max-w-xs">${file.name}</p>
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">${fileType} · ${fileSize} · ${fileExt}</p>
            `;
            
            // Create remove button
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors';
            removeBtn.innerHTML = `
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
            `;
            
            removeBtn.addEventListener('click', () => {
                // Remove from DOM
                li.remove();
                
                // Remove from state
                const index = parseInt(li.dataset.fileId);
                uploadedFiles.splice(index, 1);
                
                // Update indices for remaining items
                document.querySelectorAll('#file-list li').forEach((item, i) => {
                    item.dataset.fileId = i;
                });
                
                // Update button count
                uploadBtn.textContent = `Start Upload (${uploadedFiles.length} files)`;
                
                // Hide list if empty
                if (uploadedFiles.length === 0) {
                    fileList.classList.add('hidden');
                    uploadBtn.disabled = true;
                }
            });
            
            // Assemble list item
            li.appendChild(previewDiv);
            li.appendChild(infoDiv);
            li.appendChild(removeBtn);
            
            // Add to list
            fileList.appendChild(li);
        }

        // Upload button handler
        uploadBtn.addEventListener('click', handleUpload);

        function handleUpload() {
            if (uploadedFiles.length === 0) return;
            
            // Disable button during upload
            uploadBtn.disabled = true;
            uploadBtn.textContent = 'Uploading...';
            
            // Simulate upload process
            setTimeout(() => {
                // Show success message
                showStatus('Upload Complete!', 'success');
                
                // Reset after delay
                setTimeout(() => {
                    // Clear file list
                    fileList.innerHTML = '';
                    fileList.classList.add('hidden');
                    
                    // Reset state
                    uploadedFiles = [];
                    
                    // Reset button
                    uploadBtn.disabled = true;
                    uploadBtn.textContent = 'Start Upload (0 files)';
                    
                    // Hide status message
                    statusMessage.classList.add('hidden');
                }, 5000);
            }, 2000);
        }

        // Show status message
        function showStatus(message, type) {
            statusMessage.classList.remove('hidden');
            statusMessage.innerHTML = `
                <div class="flex items-center">
                    <div class="mr-2">
                        ${type === 'success' 
                            ? `<svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                               </svg>` 
                            : `<svg class="w-6 h-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                               </svg>`
                        }
                    </div>
                    <span class="${type === 'success' ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'}">${message}</span>
                </div>
            `;
            
            // Add pulse animation for success
            if (type === 'success') {
                statusMessage.querySelector('svg').classList.add('pulse');
            }
        }
    </script>
</body>
</html>